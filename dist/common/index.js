var __webpack_modules__ = {
  "./src/common/index.ts": 
  /*!*****************************!*\
  !*** ./src/common/index.ts ***!
  \*****************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeAllListeners: () => (/* reexport safe */ _interceptor_example__WEBPACK_IMPORTED_MODULE_0__.initializeAllListeners),\n/* harmony export */   messageInterceptor: () => (/* reexport safe */ _message_interceptor__WEBPACK_IMPORTED_MODULE_1__.messageInterceptor)\n/* harmony export */ });\n/* harmony import */ var _interceptor_example__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interceptor-example */ "./src/common/interceptor-example.ts");\n/* harmony import */ var _message_interceptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./message-interceptor */ "./src/common/message-interceptor.ts");\n/**\n * Commonæ¨¡å—ç»Ÿä¸€å¯¼å‡º\n */\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7R0FFRztBQUU0RDtBQUMyQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvY29tbW9uL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb21tb27mqKHlnZfnu5/kuIDlr7zlh7pcclxuICovXHJcblxyXG5leHBvcnQgeyBpbml0aWFsaXplQWxsTGlzdGVuZXJzIH0gZnJvbSAnLi9pbnRlcmNlcHRvci1leGFtcGxlJztcclxuZXhwb3J0IHsgbWVzc2FnZUludGVyY2VwdG9yLCB0eXBlIEdlbmVyYXRpb25FdmVudCwgdHlwZSBJbnRlcmNlcHRlZE1lc3NhZ2UgfSBmcm9tICcuL21lc3NhZ2UtaW50ZXJjZXB0b3InO1xyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/index.ts\n\n}');
  },
  "./src/common/interceptor-example.ts": 
  /*!*******************************************!*\
  !*** ./src/common/interceptor-example.ts ***!
  \*******************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeAllListeners: () => (/* binding */ initializeAllListeners),\n/* harmony export */   setupAIMessageListener: () => (/* binding */ setupAIMessageListener),\n/* harmony export */   setupGenerationListener: () => (/* binding */ setupGenerationListener),\n/* harmony export */   setupUserMessageListener: () => (/* binding */ setupUserMessageListener)\n/* harmony export */ });\n/* harmony import */ var _message_interceptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./message-interceptor */ \"./src/common/message-interceptor.ts\");\n/**\n * æ¶ˆæ¯æ‹¦æˆªå™¨ä½¿ç”¨ç¤ºä¾‹\n *\n * å±•ç¤ºå¦‚ä½•ä½¿ç”¨ messageInterceptor ç›‘å¬å’Œå“åº”æ¶ˆæ¯\n */\n\n// ============================================================================\n// ç¤ºä¾‹ 1: ç›‘å¬ç”¨æˆ·æ¶ˆæ¯\n// ============================================================================\nfunction setupUserMessageListener() {\n    const unsubscribe = _message_interceptor__WEBPACK_IMPORTED_MODULE_0__.messageInterceptor.onUserMessage((message) => {\n        console.log('æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯:', message.content);\n        // æ£€æµ‹ç‰¹å®šå…³é”®è¯\n        if (message.content.includes('ç”ŸæˆæŠ€èƒ½å¡')) {\n            console.log('ðŸŽ¨ æ£€æµ‹åˆ°ç”Ÿæˆè¯·æ±‚ï¼');\n            handleSkillCardGenerationRequest(message);\n        }\n        if (message.content.includes('æŸ¥çœ‹å¡ç‰Œ')) {\n            console.log('ðŸ“‹ æ˜¾ç¤ºå¡ç‰Œåˆ—è¡¨');\n            // TODO: æ‰“å¼€å¡ç‰Œç®¡ç†ç•Œé¢\n        }\n    });\n    // åœ¨é¡µé¢å¸è½½æ—¶å–æ¶ˆè®¢é˜…\n    $(window).on('pagehide', unsubscribe);\n}\n// ============================================================================\n// ç¤ºä¾‹ 2: ç›‘å¬AIå›žå¤\n// ============================================================================\nfunction setupAIMessageListener() {\n    const unsubscribe = _message_interceptor__WEBPACK_IMPORTED_MODULE_0__.messageInterceptor.onAIMessage((message) => {\n        console.log('æ”¶åˆ°AIæ¶ˆæ¯:', message.content);\n        // å°è¯•è§£æžç»“æž„åŒ–å†…å®¹\n        const parsed = parseSkillCardFromAI(message.content);\n        if (parsed) {\n            console.log('âœ… è§£æžåˆ°æŠ€èƒ½å¡:', parsed);\n            saveGeneratedSkillCard(parsed);\n            toastr.success(`æ–°æŠ€èƒ½å¡å·²ç”Ÿæˆï¼š${parsed.name}`);\n        }\n    });\n    $(window).on('pagehide', unsubscribe);\n}\n// ============================================================================\n// ç¤ºä¾‹ 3: ç›‘å¬ç”Ÿæˆäº‹ä»¶\n// ============================================================================\nfunction setupGenerationListener() {\n    const unsubscribe = _message_interceptor__WEBPACK_IMPORTED_MODULE_0__.messageInterceptor.onGeneration(event => {\n        if (event.type === 'started') {\n            console.log('ðŸš€ AIå¼€å§‹ç”Ÿæˆ...');\n            // å¯ä»¥åœ¨è¿™é‡Œæ³¨å…¥é¢å¤–çš„ä¸Šä¸‹æ–‡\n        }\n        if (event.type === 'stopped') {\n            console.log('â¸ï¸ AIç”Ÿæˆå·²åœæ­¢');\n        }\n        if (event.type === 'finished') {\n            console.log('âœ… AIç”Ÿæˆå®Œæˆ');\n        }\n    });\n    $(window).on('pagehide', unsubscribe);\n}\n// ============================================================================\n// è¾…åŠ©å‡½æ•°\n// ============================================================================\n/**\n * å¤„ç†æŠ€èƒ½å¡ç”Ÿæˆè¯·æ±‚\n */\nasync function handleSkillCardGenerationRequest(message) {\n    // æå–å‚æ•°\n    const params = extractGenerationParams(message.content);\n    // ç»„è£…æç¤ºè¯ï¼ˆç®€åŒ–ç‰ˆï¼Œå®Œæ•´ç‰ˆåœ¨ prompt-factory.tsï¼‰\n    const prompt = `\r\nè¯·ç”Ÿæˆä¸€å¼ æŠ€èƒ½å¡ï¼š\r\n- å±žæ€§ï¼š${params.attribute || 'ç†æ€§'}\r\n- ç¨€æœ‰åº¦ï¼š${params.rarity || 'SSR'}\r\n\r\nè¾“å‡ºæ ¼å¼ï¼š\r\n\\`\\`\\`json\r\n{\r\n  \"name\": \"å¡ç‰Œåç§°\",\r\n  \"attribute\": \"ç†æ€§\",\r\n  \"rarity\": \"SSR\",\r\n  \"cost\": 5,\r\n  \"effect_before\": \"æ•ˆæžœæè¿°\",\r\n  \"effect_after\": \"å¼ºåŒ–åŽæ•ˆæžœ\"\r\n}\r\n\\`\\`\\`\r\n  `;\n    // æ³¨å…¥æç¤ºè¯\n    await _message_interceptor__WEBPACK_IMPORTED_MODULE_0__.messageInterceptor.appendToSystemPrompt(prompt);\n    console.log('âœ… æç¤ºè¯å·²æ³¨å…¥');\n}\n/**\n * æå–ç”Ÿæˆå‚æ•°\n */\nfunction extractGenerationParams(content) {\n    const params = {};\n    // æ£€æµ‹å±žæ€§\n    if (content.includes('ç†æ€§'))\n        params.attribute = 'ç†æ€§';\n    if (content.includes('æ„Ÿæ€§'))\n        params.attribute = 'æ„Ÿæ€§';\n    if (content.includes('éžå‡¡'))\n        params.attribute = 'éžå‡¡';\n    if (content.includes('è‡ªç”±'))\n        params.attribute = 'è‡ªç”±';\n    // æ£€æµ‹ç¨€æœ‰åº¦\n    if (content.includes('SSR'))\n        params.rarity = 'SSR';\n    if (content.includes('SR'))\n        params.rarity = 'SR';\n    if (content.includes('R'))\n        params.rarity = 'R';\n    if (content.includes('N'))\n        params.rarity = 'N';\n    return params;\n}\n/**\n * ä»ŽAIå›žå¤ä¸­è§£æžæŠ€èƒ½å¡\n */\nfunction parseSkillCardFromAI(content) {\n    // å°è¯•è§£æžJSONä»£ç å—\n    const jsonMatch = content.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n    if (jsonMatch) {\n        try {\n            const parsed = JSON.parse(jsonMatch[1]);\n            if (parsed.name && parsed.attribute) {\n                return parsed;\n            }\n        }\n        catch (e) {\n            console.warn('JSONè§£æžå¤±è´¥:', e);\n        }\n    }\n    return null;\n}\n/**\n * ä¿å­˜AIç”Ÿæˆçš„æŠ€èƒ½å¡\n */\nasync function saveGeneratedSkillCard(card) {\n    // å¯¼å…¥å­˜å‚¨å‡½æ•°\n    const { getGachaData, saveGachaData } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../å¶åƒå¤§å¸ˆé—ªè€€è‰²å½©/utils/game-data */ \"./src/å¶åƒå¤§å¸ˆé—ªè€€è‰²å½©/utils/game-data.ts\"));\n    // è¯»å–çŽ°æœ‰æ•°æ®\n    const gameData = await getGachaData();\n    // æ·»åŠ ç”Ÿæˆçš„æŠ€èƒ½å¡\n    if (!gameData.generatedSkillCards) {\n        gameData.generatedSkillCards = [];\n    }\n    gameData.generatedSkillCards.push({\n        ...card,\n        generatedAt: Date.now(),\n        id: `generated_${Date.now()}`,\n    });\n    // ä¿å­˜\n    await saveGachaData(gameData);\n    console.log('ðŸ’¾ æŠ€èƒ½å¡å·²ä¿å­˜åˆ°IndexedDB');\n}\n// ============================================================================\n// åˆå§‹åŒ–æ‰€æœ‰ç›‘å¬å™¨\n// ============================================================================\nfunction initializeAllListeners() {\n    setupUserMessageListener();\n    setupAIMessageListener();\n    setupGenerationListener();\n    console.log('âœ… æ‰€æœ‰æ¶ˆæ¯ç›‘å¬å™¨å·²åˆå§‹åŒ–');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ3ZCLEVBQUUsRUFBRSxhQUFhLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTtLQUM5QixDQUFDLENBQUM7SUFFSCxLQUFLO0lBQ0wsTUFBTSxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFOUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3JDLENBQUM7QUFFRCwrRUFBK0U7QUFDL0UsV0FBVztBQUNYLCtFQUErRTtBQUV4RSxTQUFTLHNCQUFzQjtJQUNwQyx3QkFBd0IsRUFBRSxDQUFDO0lBQzNCLHNCQUFzQixFQUFFLENBQUM7SUFDekIsdUJBQXVCLEVBQUUsQ0FBQztJQUUxQixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQy9CLENBQUMiLCJzb3VyY2VzIjpbInNyYzovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvc3JjL2NvbW1vbi9pbnRlcmNlcHRvci1leGFtcGxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDmtojmga/mi6bmiKrlmajkvb/nlKjnpLrkvotcclxuICpcclxuICog5bGV56S65aaC5L2V5L2/55SoIG1lc3NhZ2VJbnRlcmNlcHRvciDnm5HlkKzlkozlk43lupTmtojmga9cclxuICovXHJcblxyXG5pbXBvcnQgeyBtZXNzYWdlSW50ZXJjZXB0b3IsIHR5cGUgSW50ZXJjZXB0ZWRNZXNzYWdlIH0gZnJvbSAnLi9tZXNzYWdlLWludGVyY2VwdG9yJztcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g56S65L6LIDE6IOebkeWQrOeUqOaIt+a2iOaBr1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBVc2VyTWVzc2FnZUxpc3RlbmVyKCkge1xyXG4gIGNvbnN0IHVuc3Vic2NyaWJlID0gbWVzc2FnZUludGVyY2VwdG9yLm9uVXNlck1lc3NhZ2UoKG1lc3NhZ2U6IEludGVyY2VwdGVkTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ+aUtuWIsOeUqOaIt+a2iOaBrzonLCBtZXNzYWdlLmNvbnRlbnQpO1xyXG5cclxuICAgIC8vIOajgOa1i+eJueWumuWFs+mUruivjVxyXG4gICAgaWYgKG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcygn55Sf5oiQ5oqA6IO95Y2hJykpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfjqgg5qOA5rWL5Yiw55Sf5oiQ6K+35rGC77yBJyk7XHJcbiAgICAgIGhhbmRsZVNraWxsQ2FyZEdlbmVyYXRpb25SZXF1ZXN0KG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtZXNzYWdlLmNvbnRlbnQuaW5jbHVkZXMoJ+afpeeci+WNoeeJjCcpKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OLIOaYvuekuuWNoeeJjOWIl+ihqCcpO1xyXG4gICAgICAvLyBUT0RPOiDmiZPlvIDljaHniYznrqHnkIbnlYzpnaJcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8g5Zyo6aG16Z2i5Y246L295pe25Y+W5raI6K6i6ZiFXHJcbiAgJCh3aW5kb3cpLm9uKCdwYWdlaGlkZScsIHVuc3Vic2NyaWJlKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDnpLrkvosgMjog55uR5ZCsQUnlm57lpI1cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQUlNZXNzYWdlTGlzdGVuZXIoKSB7XHJcbiAgY29uc3QgdW5zdWJzY3JpYmUgPSBtZXNzYWdlSW50ZXJjZXB0b3Iub25BSU1lc3NhZ2UoKG1lc3NhZ2U6IEludGVyY2VwdGVkTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ+aUtuWIsEFJ5raI5oGvOicsIG1lc3NhZ2UuY29udGVudCk7XHJcblxyXG4gICAgLy8g5bCd6K+V6Kej5p6Q57uT5p6E5YyW5YaF5a65XHJcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZVNraWxsQ2FyZEZyb21BSShtZXNzYWdlLmNvbnRlbnQpO1xyXG5cclxuICAgIGlmIChwYXJzZWQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSDop6PmnpDliLDmioDog73ljaE6JywgcGFyc2VkKTtcclxuICAgICAgc2F2ZUdlbmVyYXRlZFNraWxsQ2FyZChwYXJzZWQpO1xyXG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg5paw5oqA6IO95Y2h5bey55Sf5oiQ77yaJHtwYXJzZWQubmFtZX1gKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdwYWdlaGlkZScsIHVuc3Vic2NyaWJlKTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDnpLrkvosgMzog55uR5ZCs55Sf5oiQ5LqL5Lu2XHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cEdlbmVyYXRpb25MaXN0ZW5lcigpIHtcclxuICBjb25zdCB1bnN1YnNjcmliZSA9IG1lc3NhZ2VJbnRlcmNlcHRvci5vbkdlbmVyYXRpb24oZXZlbnQgPT4ge1xyXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdzdGFydGVkJykge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+agCBBSeW8gOWni+eUn+aIkC4uLicpO1xyXG4gICAgICAvLyDlj6/ku6XlnKjov5nph4zms6jlhaXpop3lpJbnmoTkuIrkuIvmlodcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3N0b3BwZWQnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfij7jvuI8gQUnnlJ/miJDlt7LlgZzmraInKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2ZpbmlzaGVkJykge1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEFJ55Sf5oiQ5a6M5oiQJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQod2luZG93KS5vbigncGFnZWhpZGUnLCB1bnN1YnNjcmliZSk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g6L6F5Yqp5Ye95pWwXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKlxyXG4gKiDlpITnkIbmioDog73ljaHnlJ/miJDor7fmsYJcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVNraWxsQ2FyZEdlbmVyYXRpb25SZXF1ZXN0KG1lc3NhZ2U6IEludGVyY2VwdGVkTWVzc2FnZSkge1xyXG4gIC8vIOaPkOWPluWPguaVsFxyXG4gIGNvbnN0IHBhcmFtcyA9IGV4dHJhY3RHZW5lcmF0aW9uUGFyYW1zKG1lc3NhZ2UuY29udGVudCk7XHJcblxyXG4gIC8vIOe7hOijheaPkOekuuivje+8iOeugOWMlueJiO+8jOWujOaVtOeJiOWcqCBwcm9tcHQtZmFjdG9yeS50c++8iVxyXG4gIGNvbnN0IHByb21wdCA9IGBcclxu6K+355Sf5oiQ5LiA5byg5oqA6IO95Y2h77yaXHJcbi0g5bGe5oCn77yaJHtwYXJhbXMuYXR0cmlidXRlIHx8ICfnkIbmgKcnfVxyXG4tIOeogOacieW6pu+8miR7cGFyYW1zLnJhcml0eSB8fCAnU1NSJ31cclxuXHJcbui+k+WHuuagvOW8j++8mlxyXG5cXGBcXGBcXGBqc29uXHJcbntcclxuICBcIm5hbWVcIjogXCLljaHniYzlkI3np7BcIixcclxuICBcImF0dHJpYnV0ZVwiOiBcIueQhuaAp1wiLFxyXG4gIFwicmFyaXR5XCI6IFwiU1NSXCIsXHJcbiAgXCJjb3N0XCI6IDUsXHJcbiAgXCJlZmZlY3RfYmVmb3JlXCI6IFwi5pWI5p6c5o+P6L+wXCIsXHJcbiAgXCJlZmZlY3RfYWZ0ZXJcIjogXCLlvLrljJblkI7mlYjmnpxcIlxyXG59XHJcblxcYFxcYFxcYFxyXG4gIGA7XHJcblxyXG4gIC8vIOazqOWFpeaPkOekuuivjVxyXG4gIGF3YWl0IG1lc3NhZ2VJbnRlcmNlcHRvci5hcHBlbmRUb1N5c3RlbVByb21wdChwcm9tcHQpO1xyXG5cclxuICBjb25zb2xlLmxvZygn4pyFIOaPkOekuuivjeW3suazqOWFpScpO1xyXG59XHJcblxyXG4vKipcclxuICog5o+Q5Y+W55Sf5oiQ5Y+C5pWwXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0R2VuZXJhdGlvblBhcmFtcyhjb250ZW50OiBzdHJpbmcpOiB7XHJcbiAgYXR0cmlidXRlPzogc3RyaW5nO1xyXG4gIHJhcml0eT86IHN0cmluZztcclxufSB7XHJcbiAgY29uc3QgcGFyYW1zOiBhbnkgPSB7fTtcclxuXHJcbiAgLy8g5qOA5rWL5bGe5oCnXHJcbiAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ+eQhuaApycpKSBwYXJhbXMuYXR0cmlidXRlID0gJ+eQhuaApyc7XHJcbiAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ+aEn+aApycpKSBwYXJhbXMuYXR0cmlidXRlID0gJ+aEn+aApyc7XHJcbiAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ+mdnuWHoScpKSBwYXJhbXMuYXR0cmlidXRlID0gJ+mdnuWHoSc7XHJcbiAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ+iHqueUsScpKSBwYXJhbXMuYXR0cmlidXRlID0gJ+iHqueUsSc7XHJcblxyXG4gIC8vIOajgOa1i+eogOacieW6plxyXG4gIGlmIChjb250ZW50LmluY2x1ZGVzKCdTU1InKSkgcGFyYW1zLnJhcml0eSA9ICdTU1InO1xyXG4gIGlmIChjb250ZW50LmluY2x1ZGVzKCdTUicpKSBwYXJhbXMucmFyaXR5ID0gJ1NSJztcclxuICBpZiAoY29udGVudC5pbmNsdWRlcygnUicpKSBwYXJhbXMucmFyaXR5ID0gJ1InO1xyXG4gIGlmIChjb250ZW50LmluY2x1ZGVzKCdOJykpIHBhcmFtcy5yYXJpdHkgPSAnTic7XHJcblxyXG4gIHJldHVybiBwYXJhbXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDku45BSeWbnuWkjeS4reino+aekOaKgOiDveWNoVxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VTa2lsbENhcmRGcm9tQUkoY29udGVudDogc3RyaW5nKTogYW55IHtcclxuICAvLyDlsJ3or5Xop6PmnpBKU09O5Luj56CB5Z2XXHJcbiAgY29uc3QganNvbk1hdGNoID0gY29udGVudC5tYXRjaCgvYGBganNvblxccyooW1xcc1xcU10qPylcXHMqYGBgLyk7XHJcbiAgaWYgKGpzb25NYXRjaCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMV0pO1xyXG4gICAgICBpZiAocGFyc2VkLm5hbWUgJiYgcGFyc2VkLmF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZWQ7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdKU09O6Kej5p6Q5aSx6LSlOicsIGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkv53lrZhBSeeUn+aIkOeahOaKgOiDveWNoVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2F2ZUdlbmVyYXRlZFNraWxsQ2FyZChjYXJkOiBhbnkpIHtcclxuICAvLyDlr7zlhaXlrZjlgqjlh73mlbBcclxuICBjb25zdCB7IGdldEdhY2hhRGF0YSwgc2F2ZUdhY2hhRGF0YSB9ID0gYXdhaXQgaW1wb3J0KCcuLi/lgbblg4/lpKfluIjpl6rogIDoibLlvakvdXRpbHMvZ2FtZS1kYXRhJyk7XHJcblxyXG4gIC8vIOivu+WPlueOsOacieaVsOaNrlxyXG4gIGNvbnN0IGdhbWVEYXRhID0gYXdhaXQgZ2V0R2FjaGFEYXRhKCk7XHJcblxyXG4gIC8vIOa3u+WKoOeUn+aIkOeahOaKgOiDveWNoVxyXG4gIGlmICghZ2FtZURhdGEuZ2VuZXJhdGVkU2tpbGxDYXJkcykge1xyXG4gICAgKGdhbWVEYXRhIGFzIGFueSkuZ2VuZXJhdGVkU2tpbGxDYXJkcyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgKGdhbWVEYXRhIGFzIGFueSkuZ2VuZXJhdGVkU2tpbGxDYXJkcy5wdXNoKHtcclxuICAgIC4uLmNhcmQsXHJcbiAgICBnZW5lcmF0ZWRBdDogRGF0ZS5ub3coKSxcclxuICAgIGlkOiBgZ2VuZXJhdGVkXyR7RGF0ZS5ub3coKX1gLFxyXG4gIH0pO1xyXG5cclxuICAvLyDkv53lrZhcclxuICBhd2FpdCBzYXZlR2FjaGFEYXRhKGdhbWVEYXRhKTtcclxuXHJcbiAgY29uc29sZS5sb2coJ/Cfkr4g5oqA6IO95Y2h5bey5L+d5a2Y5YiwSW5kZXhlZERCJyk7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g5Yid5aeL5YyW5omA5pyJ55uR5ZCs5ZmoXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQWxsTGlzdGVuZXJzKCkge1xyXG4gIHNldHVwVXNlck1lc3NhZ2VMaXN0ZW5lcigpO1xyXG4gIHNldHVwQUlNZXNzYWdlTGlzdGVuZXIoKTtcclxuICBzZXR1cEdlbmVyYXRpb25MaXN0ZW5lcigpO1xyXG5cclxuICBjb25zb2xlLmxvZygn4pyFIOaJgOaciea2iOaBr+ebkeWQrOWZqOW3suWIneWni+WMlicpO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/interceptor-example.ts\n\n}");
  },
  "./src/common/message-interceptor.ts": 
  /*!*******************************************!*\
  !*** ./src/common/message-interceptor.ts ***!
  \*******************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   messageInterceptor: () => (/* binding */ messageInterceptor)\n/* harmony export */ });\n/**\n * SillyTavern æ¶ˆæ¯æ‹¦æˆªå™¨\n *\n * åŠŸèƒ½ï¼š\n * - ç›‘å¬ç”¨æˆ·å‘é€çš„æ¶ˆæ¯\n * - ç›‘å¬AIç”Ÿæˆçš„å›žå¤\n * - ç›‘å¬ç”Ÿæˆäº‹ä»¶ï¼ˆå¯æ³¨å…¥æç¤ºè¯ï¼‰\n * - æä¾›äº‹ä»¶è®¢é˜…æœºåˆ¶\n */\n// ============================================================================\n// æ¶ˆæ¯æ‹¦æˆªå™¨ç±»\n// ============================================================================\nclass MessageInterceptor {\n    // ç”¨æˆ·æ¶ˆæ¯å¤„ç†å™¨é›†åˆ\n    userMessageHandlers = new Set();\n    // AIæ¶ˆæ¯å¤„ç†å™¨é›†åˆ\n    aiMessageHandlers = new Set();\n    // ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨é›†åˆ\n    generationHandlers = new Set();\n    // æ˜¯å¦å·²åˆå§‹åŒ–\n    initialized = false;\n    /**\n     * åˆå§‹åŒ–æ‹¦æˆªå™¨ï¼ˆç›‘å¬é…’é¦†äº‹ä»¶ï¼‰\n     */\n    initialize() {\n        if (this.initialized) {\n            console.warn('âš ï¸ MessageInterceptor å·²ç»åˆå§‹åŒ–è¿‡äº†');\n            return;\n        }\n        console.log('ðŸŽ¯ åˆå§‹åŒ–æ¶ˆæ¯æ‹¦æˆªå™¨...');\n        // æ£€æŸ¥é…’é¦†åŠ©æ‰‹æ˜¯å¦å¯ç”¨\n        if (typeof eventOn === 'undefined') {\n            console.error('âŒ eventOn å‡½æ•°ä¸å¯ç”¨ï¼Œè¯·ç¡®ä¿åœ¨é…’é¦†çŽ¯å¢ƒä¸­è¿è¡Œ');\n            return;\n        }\n        this.initializeEventListeners();\n        this.initialized = true;\n        console.log('âœ… æ¶ˆæ¯æ‹¦æˆªå™¨åˆå§‹åŒ–å®Œæˆ');\n    }\n    /**\n     * åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨\n     */\n    initializeEventListeners() {\n        // ç›‘å¬ç”¨æˆ·å‘é€æ¶ˆæ¯\n        eventOn(tavern_events.MESSAGE_SENT, (data) => {\n            this.handleUserMessage({\n                type: 'user',\n                content: data.text || data.message || '',\n                timestamp: Date.now(),\n                metadata: {\n                    messageId: data.mesId,\n                },\n            });\n        });\n        // ç›‘å¬AIå›žå¤æ¶ˆæ¯\n        eventOn(tavern_events.MESSAGE_RECEIVED, (data) => {\n            this.handleAIMessage({\n                type: 'ai',\n                content: data.text || data.message || '',\n                timestamp: Date.now(),\n                metadata: {\n                    characterName: data.character_name,\n                    swipeId: data.swipe_id,\n                    messageId: data.mesId,\n                },\n            });\n        });\n        // ç›‘å¬ç”Ÿæˆå¼€å§‹\n        eventOn(tavern_events.GENERATION_STARTED, (data) => {\n            this.handleGenerationEvent({\n                type: 'started',\n                timestamp: Date.now(),\n                metadata: data,\n            });\n        });\n        // ç›‘å¬ç”Ÿæˆç»“æŸ\n        eventOn(tavern_events.GENERATION_STOPPED, (data) => {\n            this.handleGenerationEvent({\n                type: 'stopped',\n                timestamp: Date.now(),\n                metadata: data,\n            });\n        });\n        console.log('ðŸ“¡ äº‹ä»¶ç›‘å¬å™¨å·²æ³¨å†Œ');\n    }\n    /**\n     * å¤„ç†ç”¨æˆ·æ¶ˆæ¯\n     */\n    handleUserMessage(message) {\n        console.log('ðŸ‘¤ [ç”¨æˆ·æ¶ˆæ¯]:', message.content.substring(0, 100));\n        // é€šçŸ¥æ‰€æœ‰å¤„ç†å™¨\n        this.userMessageHandlers.forEach(handler => {\n            try {\n                handler(message);\n            }\n            catch (error) {\n                console.error('âŒ ç”¨æˆ·æ¶ˆæ¯å¤„ç†å™¨é”™è¯¯:', error);\n            }\n        });\n    }\n    /**\n     * å¤„ç†AIæ¶ˆæ¯\n     */\n    handleAIMessage(message) {\n        console.log('ðŸ¤– [AIæ¶ˆæ¯]:', message.content.substring(0, 100));\n        // é€šçŸ¥æ‰€æœ‰å¤„ç†å™¨\n        this.aiMessageHandlers.forEach(handler => {\n            try {\n                handler(message);\n            }\n            catch (error) {\n                console.error('âŒ AIæ¶ˆæ¯å¤„ç†å™¨é”™è¯¯:', error);\n            }\n        });\n    }\n    /**\n     * å¤„ç†ç”Ÿæˆäº‹ä»¶\n     */\n    handleGenerationEvent(event) {\n        console.log('âš¡ [ç”Ÿæˆäº‹ä»¶]:', event.type);\n        // é€šçŸ¥æ‰€æœ‰å¤„ç†å™¨\n        this.generationHandlers.forEach(handler => {\n            try {\n                handler(event);\n            }\n            catch (error) {\n                console.error('âŒ ç”Ÿæˆäº‹ä»¶å¤„ç†å™¨é”™è¯¯:', error);\n            }\n        });\n    }\n    // ==========================================================================\n    // å…¬å…±API - è®¢é˜…äº‹ä»¶\n    // ==========================================================================\n    /**\n     * è®¢é˜…ç”¨æˆ·æ¶ˆæ¯\n     * @returns å–æ¶ˆè®¢é˜…å‡½æ•°\n     */\n    onUserMessage(handler) {\n        this.userMessageHandlers.add(handler);\n        return () => {\n            this.userMessageHandlers.delete(handler);\n        };\n    }\n    /**\n     * è®¢é˜…AIæ¶ˆæ¯\n     * @returns å–æ¶ˆè®¢é˜…å‡½æ•°\n     */\n    onAIMessage(handler) {\n        this.aiMessageHandlers.add(handler);\n        return () => {\n            this.aiMessageHandlers.delete(handler);\n        };\n    }\n    /**\n     * è®¢é˜…ç”Ÿæˆäº‹ä»¶\n     * @returns å–æ¶ˆè®¢é˜…å‡½æ•°\n     */\n    onGeneration(handler) {\n        this.generationHandlers.add(handler);\n        return () => {\n            this.generationHandlers.delete(handler);\n        };\n    }\n    // ==========================================================================\n    // å…¬å…±API - å‘é…’é¦†å‘é€æŒ‡ä»¤\n    // ==========================================================================\n    /**\n     * æ³¨å…¥æ–‡æœ¬åˆ°å½“å‰å¯¹è¯ï¼ˆä¸ä¼šå‘é€ç»™LLMï¼Œä»…æ˜¾ç¤ºåœ¨UIï¼‰\n     */\n    async injectText(text) {\n        try {\n            // ä½¿ç”¨é…’é¦†åŠ©æ‰‹çš„slashå‘½ä»¤\n            await triggerSlash('/echo', text);\n            console.log('âœ… æ–‡æœ¬å·²æ³¨å…¥');\n        }\n        catch (error) {\n            console.error('âŒ æ³¨å…¥æ–‡æœ¬å¤±è´¥:', error);\n            throw error;\n        }\n    }\n    /**\n     * è¿½åŠ å†…å®¹åˆ°ç³»ç»Ÿæç¤ºè¯ï¼ˆä¼šå½±å“LLMï¼‰\n     */\n    async appendToSystemPrompt(content) {\n        try {\n            // ä½¿ç”¨é…’é¦†çš„setvarå‘½ä»¤è®¾ç½®ä¸´æ—¶å˜é‡\n            await triggerSlash('/setvar', `key=game_context ${content}`);\n            console.log('âœ… ç³»ç»Ÿæç¤ºè¯å·²æ›´æ–°');\n        }\n        catch (error) {\n            console.error('âŒ æ›´æ–°ç³»ç»Ÿæç¤ºè¯å¤±è´¥:', error);\n            throw error;\n        }\n    }\n    /**\n     * è§¦å‘ä¸€æ¬¡AIç”Ÿæˆ\n     */\n    async triggerGeneration(prompt) {\n        try {\n            if (prompt) {\n                // å…ˆæ³¨å…¥æç¤ºè¯\n                await this.injectText(prompt);\n            }\n            // è§¦å‘ç”Ÿæˆ\n            await triggerSlash('/generate');\n            console.log('âœ… å·²è§¦å‘AIç”Ÿæˆ');\n        }\n        catch (error) {\n            console.error('âŒ è§¦å‘ç”Ÿæˆå¤±è´¥:', error);\n            throw error;\n        }\n    }\n    /**\n     * èŽ·å–å½“å‰è§’è‰²å¡ä¿¡æ¯\n     */\n    getCurrentCharacter() {\n        if (typeof SillyTavern !== 'undefined' && SillyTavern.getContext) {\n            const context = SillyTavern.getContext();\n            return {\n                name: context.name1 || 'æœªçŸ¥',\n                characterId: context.characterId,\n                chatId: context.chatId,\n            };\n        }\n        return null;\n    }\n    /**\n     * èŽ·å–å½“å‰èŠå¤©ID\n     */\n    getCurrentChatId() {\n        if (typeof SillyTavern !== 'undefined' && SillyTavern.getCurrentChatId) {\n            return SillyTavern.getCurrentChatId();\n        }\n        return null;\n    }\n}\n// ============================================================================\n// å¯¼å‡ºå•ä¾‹\n// ============================================================================\nconst messageInterceptor = new MessageInterceptor();\n// è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆåœ¨é¡µé¢åŠ è½½æ—¶ï¼‰\n$(() => {\n    messageInterceptor.initialize();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sS0FBSyxDQUFDO1FBQ2QsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILG1CQUFtQjtRQUNqQixJQUFJLE9BQU8sV0FBVyxLQUFLLFdBQVcsSUFBSSxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDakUsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ3pDLE9BQU87Z0JBQ0wsSUFBSSxFQUFFLE9BQU8sQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFDM0IsV0FBVyxFQUFFLE9BQU8sQ0FBQyxXQUFXO2dCQUNoQyxNQUFNLEVBQUUsT0FBTyxDQUFDLE1BQU07YUFDdkIsQ0FBQztRQUNKLENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7T0FFRztJQUNILGdCQUFnQjtRQUNkLElBQUksT0FBTyxXQUFXLEtBQUssV0FBVyxJQUFJLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3ZFLE9BQU8sV0FBVyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEMsQ0FBQztRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztDQUNGO0FBRUQsK0VBQStFO0FBQy9FLE9BQU87QUFDUCwrRUFBK0U7QUFFeEUsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLGtCQUFrQixFQUFFLENBQUM7QUFFM0QsZ0JBQWdCO0FBQ2hCLENBQUMsQ0FBQyxHQUFHLEVBQUU7SUFDTCxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNsQyxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvY29tbW9uL21lc3NhZ2UtaW50ZXJjZXB0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFNpbGx5VGF2ZXJuIOa2iOaBr+aLpuaIquWZqFxyXG4gKlxyXG4gKiDlip/og73vvJpcclxuICogLSDnm5HlkKznlKjmiLflj5HpgIHnmoTmtojmga9cclxuICogLSDnm5HlkKxBSeeUn+aIkOeahOWbnuWkjVxyXG4gKiAtIOebkeWQrOeUn+aIkOS6i+S7tu+8iOWPr+azqOWFpeaPkOekuuivje+8iVxyXG4gKiAtIOaPkOS+m+S6i+S7tuiuoumYheacuuWItlxyXG4gKi9cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g57G75Z6L5a6a5LmJXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8qKiDmi6bmiKrliLDnmoTmtojmga8gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbnRlcmNlcHRlZE1lc3NhZ2Uge1xyXG4gIHR5cGU6ICd1c2VyJyB8ICdhaSc7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gIG1ldGFkYXRhPzoge1xyXG4gICAgY2hhcmFjdGVyTmFtZT86IHN0cmluZztcclxuICAgIHN3aXBlSWQ/OiBudW1iZXI7XHJcbiAgICBtZXNzYWdlSWQ/OiBudW1iZXI7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqIOeUn+aIkOS6i+S7tuaVsOaNriAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYXRpb25FdmVudCB7XHJcbiAgdHlwZTogJ3N0YXJ0ZWQnIHwgJ3N0b3BwZWQnIHwgJ2ZpbmlzaGVkJztcclxuICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICBtZXRhZGF0YT86IGFueTtcclxufVxyXG5cclxuLyoqIOa2iOaBr+WkhOeQhuWZqCAqL1xyXG50eXBlIE1lc3NhZ2VIYW5kbGVyID0gKG1lc3NhZ2U6IEludGVyY2VwdGVkTWVzc2FnZSkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XHJcbnR5cGUgR2VuZXJhdGlvbkhhbmRsZXIgPSAoZXZlbnQ6IEdlbmVyYXRpb25FdmVudCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOa2iOaBr+aLpuaIquWZqOexu1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jbGFzcyBNZXNzYWdlSW50ZXJjZXB0b3Ige1xyXG4gIC8vIOeUqOaIt+a2iOaBr+WkhOeQhuWZqOmbhuWQiFxyXG4gIHByaXZhdGUgdXNlck1lc3NhZ2VIYW5kbGVycyA9IG5ldyBTZXQ8TWVzc2FnZUhhbmRsZXI+KCk7XHJcblxyXG4gIC8vIEFJ5raI5oGv5aSE55CG5Zmo6ZuG5ZCIXHJcbiAgcHJpdmF0ZSBhaU1lc3NhZ2VIYW5kbGVycyA9IG5ldyBTZXQ8TWVzc2FnZUhhbmRsZXI+KCk7XHJcblxyXG4gIC8vIOeUn+aIkOS6i+S7tuWkhOeQhuWZqOmbhuWQiFxyXG4gIHByaXZhdGUgZ2VuZXJhdGlvbkhhbmRsZXJzID0gbmV3IFNldDxHZW5lcmF0aW9uSGFuZGxlcj4oKTtcclxuXHJcbiAgLy8g5piv5ZCm5bey5Yid5aeL5YyWXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbmi6bmiKrlmajvvIjnm5HlkKzphZLppobkuovku7bvvIlcclxuICAgKi9cclxuICBpbml0aWFsaXplKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gTWVzc2FnZUludGVyY2VwdG9yIOW3sue7j+WIneWni+WMlui/h+S6hicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/Cfjq8g5Yid5aeL5YyW5raI5oGv5oum5oiq5ZmoLi4uJyk7XHJcblxyXG4gICAgLy8g5qOA5p+l6YWS6aaG5Yqp5omL5piv5ZCm5Y+v55SoXHJcbiAgICBpZiAodHlwZW9mIGV2ZW50T24gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBldmVudE9uIOWHveaVsOS4jeWPr+eUqO+8jOivt+ehruS/neWcqOmFkummhueOr+Wig+S4rei/kOihjCcpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0aWFsaXplRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfinIUg5raI5oGv5oum5oiq5Zmo5Yid5aeL5YyW5a6M5oiQJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJbkuovku7bnm5HlkKzlmahcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVFdmVudExpc3RlbmVycygpOiB2b2lkIHtcclxuICAgIC8vIOebkeWQrOeUqOaIt+WPkemAgea2iOaBr1xyXG4gICAgZXZlbnRPbih0YXZlcm5fZXZlbnRzLk1FU1NBR0VfU0VOVCwgKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZVVzZXJNZXNzYWdlKHtcclxuICAgICAgICB0eXBlOiAndXNlcicsXHJcbiAgICAgICAgY29udGVudDogZGF0YS50ZXh0IHx8IGRhdGEubWVzc2FnZSB8fCAnJyxcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgIG1lc3NhZ2VJZDogZGF0YS5tZXNJZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOebkeWQrEFJ5Zue5aSN5raI5oGvXHJcbiAgICBldmVudE9uKHRhdmVybl9ldmVudHMuTUVTU0FHRV9SRUNFSVZFRCwgKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZUFJTWVzc2FnZSh7XHJcbiAgICAgICAgdHlwZTogJ2FpJyxcclxuICAgICAgICBjb250ZW50OiBkYXRhLnRleHQgfHwgZGF0YS5tZXNzYWdlIHx8ICcnLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgY2hhcmFjdGVyTmFtZTogZGF0YS5jaGFyYWN0ZXJfbmFtZSxcclxuICAgICAgICAgIHN3aXBlSWQ6IGRhdGEuc3dpcGVfaWQsXHJcbiAgICAgICAgICBtZXNzYWdlSWQ6IGRhdGEubWVzSWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDnm5HlkKznlJ/miJDlvIDlp4tcclxuICAgIGV2ZW50T24odGF2ZXJuX2V2ZW50cy5HRU5FUkFUSU9OX1NUQVJURUQsIChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVHZW5lcmF0aW9uRXZlbnQoe1xyXG4gICAgICAgIHR5cGU6ICdzdGFydGVkJyxcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgbWV0YWRhdGE6IGRhdGEsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g55uR5ZCs55Sf5oiQ57uT5p2fXHJcbiAgICBldmVudE9uKHRhdmVybl9ldmVudHMuR0VORVJBVElPTl9TVE9QUEVELCAoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlR2VuZXJhdGlvbkV2ZW50KHtcclxuICAgICAgICB0eXBlOiAnc3RvcHBlZCcsXHJcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIG1ldGFkYXRhOiBkYXRhLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn5OhIOS6i+S7tuebkeWQrOWZqOW3suazqOWGjCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CG55So5oi35raI5oGvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVVc2VyTWVzc2FnZShtZXNzYWdlOiBJbnRlcmNlcHRlZE1lc3NhZ2UpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5GkIFvnlKjmiLfmtojmga9dOicsIG1lc3NhZ2UuY29udGVudC5zdWJzdHJpbmcoMCwgMTAwKSk7XHJcblxyXG4gICAgLy8g6YCa55+l5omA5pyJ5aSE55CG5ZmoXHJcbiAgICB0aGlzLnVzZXJNZXNzYWdlSGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBoYW5kbGVyKG1lc3NhZ2UpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDnlKjmiLfmtojmga/lpITnkIblmajplJnor686JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhkFJ5raI5oGvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBoYW5kbGVBSU1lc3NhZ2UobWVzc2FnZTogSW50ZXJjZXB0ZWRNZXNzYWdlKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygn8J+kliBbQUnmtojmga9dOicsIG1lc3NhZ2UuY29udGVudC5zdWJzdHJpbmcoMCwgMTAwKSk7XHJcblxyXG4gICAgLy8g6YCa55+l5omA5pyJ5aSE55CG5ZmoXHJcbiAgICB0aGlzLmFpTWVzc2FnZUhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaGFuZGxlcihtZXNzYWdlKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQUnmtojmga/lpITnkIblmajplJnor686JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhueUn+aIkOS6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgaGFuZGxlR2VuZXJhdGlvbkV2ZW50KGV2ZW50OiBHZW5lcmF0aW9uRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCfimqEgW+eUn+aIkOS6i+S7tl06JywgZXZlbnQudHlwZSk7XHJcblxyXG4gICAgLy8g6YCa55+l5omA5pyJ5aSE55CG5ZmoXHJcbiAgICB0aGlzLmdlbmVyYXRpb25IYW5kbGVycy5mb3JFYWNoKGhhbmRsZXIgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDnlJ/miJDkuovku7blpITnkIblmajplJnor686JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g5YWs5YWxQVBJIC0g6K6i6ZiF5LqL5Lu2XHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6i6ZiF55So5oi35raI5oGvXHJcbiAgICogQHJldHVybnMg5Y+W5raI6K6i6ZiF5Ye95pWwXHJcbiAgICovXHJcbiAgb25Vc2VyTWVzc2FnZShoYW5kbGVyOiBNZXNzYWdlSGFuZGxlcik6ICgpID0+IHZvaWQge1xyXG4gICAgdGhpcy51c2VyTWVzc2FnZUhhbmRsZXJzLmFkZChoYW5kbGVyKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHRoaXMudXNlck1lc3NhZ2VIYW5kbGVycy5kZWxldGUoaGFuZGxlcik7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6i6ZiFQUnmtojmga9cclxuICAgKiBAcmV0dXJucyDlj5bmtojorqLpmIXlh73mlbBcclxuICAgKi9cclxuICBvbkFJTWVzc2FnZShoYW5kbGVyOiBNZXNzYWdlSGFuZGxlcik6ICgpID0+IHZvaWQge1xyXG4gICAgdGhpcy5haU1lc3NhZ2VIYW5kbGVycy5hZGQoaGFuZGxlcik7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICB0aGlzLmFpTWVzc2FnZUhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorqLpmIXnlJ/miJDkuovku7ZcclxuICAgKiBAcmV0dXJucyDlj5bmtojorqLpmIXlh73mlbBcclxuICAgKi9cclxuICBvbkdlbmVyYXRpb24oaGFuZGxlcjogR2VuZXJhdGlvbkhhbmRsZXIpOiAoKSA9PiB2b2lkIHtcclxuICAgIHRoaXMuZ2VuZXJhdGlvbkhhbmRsZXJzLmFkZChoYW5kbGVyKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZ2VuZXJhdGlvbkhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOWFrOWFsUFQSSAtIOWQkemFkummhuWPkemAgeaMh+S7pFxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIOazqOWFpeaWh+acrOWIsOW9k+WJjeWvueivne+8iOS4jeS8muWPkemAgee7mUxMTe+8jOS7heaYvuekuuWcqFVJ77yJXHJcbiAgICovXHJcbiAgYXN5bmMgaW5qZWN0VGV4dCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOS9v+eUqOmFkummhuWKqeaJi+eahHNsYXNo5ZG95LukXHJcbiAgICAgIGF3YWl0IHRyaWdnZXJTbGFzaCgnL2VjaG8nLCB0ZXh0KTtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSDmlofmnKzlt7Lms6jlhaUnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDms6jlhaXmlofmnKzlpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOi/veWKoOWGheWuueWIsOezu+e7n+aPkOekuuivje+8iOS8muW9seWTjUxMTe+8iVxyXG4gICAqL1xyXG4gIGFzeW5jIGFwcGVuZFRvU3lzdGVtUHJvbXB0KGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g5L2/55So6YWS6aaG55qEc2V0dmFy5ZG95Luk6K6+572u5Li05pe25Y+Y6YePXHJcbiAgICAgIGF3YWl0IHRyaWdnZXJTbGFzaCgnL3NldHZhcicsIGBrZXk9Z2FtZV9jb250ZXh0ICR7Y29udGVudH1gKTtcclxuICAgICAgY29uc29sZS5sb2coJ+KchSDns7vnu5/mj5DnpLror43lt7Lmm7TmlrAnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCDmm7TmlrDns7vnu5/mj5DnpLror43lpLHotKU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOinpuWPkeS4gOasoUFJ55Sf5oiQXHJcbiAgICovXHJcbiAgYXN5bmMgdHJpZ2dlckdlbmVyYXRpb24ocHJvbXB0Pzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAocHJvbXB0KSB7XHJcbiAgICAgICAgLy8g5YWI5rOo5YWl5o+Q56S66K+NXHJcbiAgICAgICAgYXdhaXQgdGhpcy5pbmplY3RUZXh0KHByb21wdCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOinpuWPkeeUn+aIkFxyXG4gICAgICBhd2FpdCB0cmlnZ2VyU2xhc2goJy9nZW5lcmF0ZScpO1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOW3suinpuWPkUFJ55Sf5oiQJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwg6Kem5Y+R55Sf5oiQ5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blvZPliY3op5LoibLljaHkv6Hmga9cclxuICAgKi9cclxuICBnZXRDdXJyZW50Q2hhcmFjdGVyKCk6IGFueSB7XHJcbiAgICBpZiAodHlwZW9mIFNpbGx5VGF2ZXJuICE9PSAndW5kZWZpbmVkJyAmJiBTaWxseVRhdmVybi5nZXRDb250ZXh0KSB7XHJcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBTaWxseVRhdmVybi5nZXRDb250ZXh0KCk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogY29udGV4dC5uYW1lMSB8fCAn5pyq55+lJyxcclxuICAgICAgICBjaGFyYWN0ZXJJZDogY29udGV4dC5jaGFyYWN0ZXJJZCxcclxuICAgICAgICBjaGF0SWQ6IGNvbnRleHQuY2hhdElkLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blvZPliY3ogYrlpKlJRFxyXG4gICAqL1xyXG4gIGdldEN1cnJlbnRDaGF0SWQoKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICBpZiAodHlwZW9mIFNpbGx5VGF2ZXJuICE9PSAndW5kZWZpbmVkJyAmJiBTaWxseVRhdmVybi5nZXRDdXJyZW50Q2hhdElkKSB7XHJcbiAgICAgIHJldHVybiBTaWxseVRhdmVybi5nZXRDdXJyZW50Q2hhdElkKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g5a+85Ye65Y2V5L6LXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBjb25zdCBtZXNzYWdlSW50ZXJjZXB0b3IgPSBuZXcgTWVzc2FnZUludGVyY2VwdG9yKCk7XHJcblxyXG4vLyDoh6rliqjliJ3lp4vljJbvvIjlnKjpobXpnaLliqDovb3ml7bvvIlcclxuJCgoKSA9PiB7XHJcbiAgbWVzc2FnZUludGVyY2VwdG9yLmluaXRpYWxpemUoKTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/message-interceptor.ts\n\n}");
  },
  "./src/å¶åƒå¤§å¸ˆé—ªè€€è‰²å½©/utils/game-data.ts": 
  /*!*****************************************!*\
  !*** ./src/å¶åƒå¤§å¸ˆé—ªè€€è‰²å½©/utils/game-data.ts ***!
  \*****************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAllData: () => (/* binding */ clearAllData),\n/* harmony export */   clearAllGameData: () => (/* binding */ clearAllGameData),\n/* harmony export */   exportAllData: () => (/* binding */ exportAllData),\n/* harmony export */   getAffection: () => (/* binding */ getAffection),\n/* harmony export */   getGachaData: () => (/* binding */ getGachaData),\n/* harmony export */   getProducerName: () => (/* binding */ getProducerName),\n/* harmony export */   getResources: () => (/* binding */ getResources),\n/* harmony export */   getSettings: () => (/* binding */ getSettings),\n/* harmony export */   importAllData: () => (/* binding */ importAllData),\n/* harmony export */   initGameData: () => (/* binding */ initGameData),\n/* harmony export */   migrateFromLocalStorage: () => (/* binding */ migrateFromLocalStorage),\n/* harmony export */   saveAffection: () => (/* binding */ saveAffection),\n/* harmony export */   saveGachaData: () => (/* binding */ saveGachaData),\n/* harmony export */   saveProducerName: () => (/* binding */ saveProducerName),\n/* harmony export */   saveResources: () => (/* binding */ saveResources),\n/* harmony export */   saveSettings: () => (/* binding */ saveSettings)\n/* harmony export */ });\n/**\n * IndexedDB æ¸¸æˆæ•°æ®ç®¡ç†ç³»ç»Ÿ\n *\n * åŠŸèƒ½ï¼š\n * - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ¸¸æˆæ•°æ®ï¼ˆèµ„æºã€æŠ½å¡ã€è®¾ç½®ç­‰ï¼‰\n * - æ”¯æŒä»ŽlocalStorageè‡ªåŠ¨è¿ç§»\n * - æä¾›ç±»åž‹å®‰å…¨çš„API\n * - é«˜æ€§èƒ½å¼‚æ­¥æ“ä½œ\n */\n// ============================================================================\n// IndexedDB é…ç½®\n// ============================================================================\nconst DB_NAME = 'shinycolors_game_data';\nconst DB_VERSION = 1;\nconst STORES = {\n    RESOURCES: 'resources',\n    GACHA: 'gacha',\n    SETTINGS: 'settings',\n    AFFECTION: 'affection',\n    METADATA: 'metadata', // å­˜å‚¨è¿ç§»çŠ¶æ€ç­‰å…ƒæ•°æ®\n};\n// ============================================================================\n// IndexedDB åˆå§‹åŒ–\n// ============================================================================\nlet dbInstance = null;\n/**\n * æ‰“å¼€æ•°æ®åº“\n */\nasync function openDatabase() {\n    if (dbInstance) {\n        return dbInstance;\n    }\n    return new Promise((resolve, reject) => {\n        const request = indexedDB.open(DB_NAME, DB_VERSION);\n        request.onerror = () => {\n            console.error('âŒ IndexedDBæ‰“å¼€å¤±è´¥:', request.error);\n            reject(request.error);\n        };\n        request.onsuccess = () => {\n            dbInstance = request.result;\n            console.log('âœ… IndexedDBæ‰“å¼€æˆåŠŸ');\n            resolve(request.result);\n        };\n        request.onupgradeneeded = event => {\n            const db = event.target.result;\n            // åˆ›å»ºæ‰€æœ‰å¯¹è±¡å­˜å‚¨\n            Object.values(STORES).forEach(storeName => {\n                if (!db.objectStoreNames.contains(storeName)) {\n                    db.createObjectStore(storeName);\n                    console.log(`ðŸ“¦ åˆ›å»ºå¯¹è±¡å­˜å‚¨: ${storeName}`);\n                }\n            });\n        };\n    });\n}\n// ============================================================================\n// é€šç”¨è¯»å†™æ“ä½œ\n// ============================================================================\n/**\n * ä»ŽIndexedDBè¯»å–æ•°æ®\n */\nasync function getData(storeName, key) {\n    try {\n        const db = await openDatabase();\n        return new Promise((resolve, reject) => {\n            const transaction = db.transaction(storeName, 'readonly');\n            const store = transaction.objectStore(storeName);\n            const request = store.get(key);\n            request.onsuccess = () => resolve(request.result || null);\n            request.onerror = () => reject(request.error);\n        });\n    }\n    catch (error) {\n        console.error(`âŒ è¯»å–æ•°æ®å¤±è´¥ [${storeName}/${key}]:`, error);\n        return null;\n    }\n}\n/**\n * å‘IndexedDBå†™å…¥æ•°æ®\n */\nasync function setData(storeName, key, value) {\n    try {\n        const db = await openDatabase();\n        // æ·±æ‹·è´åŽ»é™¤Proxyï¼ˆä½¿ç”¨JSONåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼‰\n        const cleanValue = JSON.parse(JSON.stringify(value));\n        return new Promise((resolve, reject) => {\n            const transaction = db.transaction(storeName, 'readwrite');\n            const store = transaction.objectStore(storeName);\n            const request = store.put(cleanValue, key);\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    catch (error) {\n        console.error(`âŒ å†™å…¥æ•°æ®å¤±è´¥ [${storeName}/${key}]:`, error);\n        throw error;\n    }\n}\n/**\n * åˆ é™¤æ•°æ®\n */\nasync function deleteData(storeName, key) {\n    try {\n        const db = await openDatabase();\n        return new Promise((resolve, reject) => {\n            const transaction = db.transaction(storeName, 'readwrite');\n            const store = transaction.objectStore(storeName);\n            const request = store.delete(key);\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    catch (error) {\n        console.error(`âŒ åˆ é™¤æ•°æ®å¤±è´¥ [${storeName}/${key}]:`, error);\n        throw error;\n    }\n}\n/**\n * æ¸…ç©ºæ•´ä¸ªå­˜å‚¨\n */\nasync function clearStore(storeName) {\n    try {\n        const db = await openDatabase();\n        return new Promise((resolve, reject) => {\n            const transaction = db.transaction(storeName, 'readwrite');\n            const store = transaction.objectStore(storeName);\n            const request = store.clear();\n            request.onsuccess = () => {\n                console.log(`ðŸ—‘ï¸ å·²æ¸…ç©ºå­˜å‚¨: ${storeName}`);\n                resolve();\n            };\n            request.onerror = () => reject(request.error);\n        });\n    }\n    catch (error) {\n        console.error(`âŒ æ¸…ç©ºå­˜å‚¨å¤±è´¥ [${storeName}]:`, error);\n        throw error;\n    }\n}\n// ============================================================================\n// localStorage è¿ç§»\n// ============================================================================\n/**\n * ä»ŽlocalStorageè¿ç§»æ•°æ®åˆ°IndexedDB\n */\nasync function migrateFromLocalStorage() {\n    console.log('ðŸ”„ å¼€å§‹ä»ŽlocalStorageè¿ç§»æ•°æ®...');\n    try {\n        // æ£€æŸ¥æ˜¯å¦å·²ç»è¿ç§»è¿‡\n        const migrated = await getData(STORES.METADATA, 'migrated_from_localstorage');\n        if (migrated) {\n            console.log('âœ… æ•°æ®å·²ç»è¿ç§»è¿‡ï¼Œè·³è¿‡');\n            return;\n        }\n        // è¿ç§»èµ„æºæ•°æ®\n        const resourcesStr = localStorage.getItem('shinycolors_resources');\n        if (resourcesStr) {\n            try {\n                const resources = JSON.parse(resourcesStr);\n                await setData(STORES.RESOURCES, 'main', resources);\n                console.log('ðŸ“¦ è¿ç§»èµ„æºæ•°æ®æˆåŠŸ');\n            }\n            catch (e) {\n                console.warn('âš ï¸ èµ„æºæ•°æ®è§£æžå¤±è´¥:', e);\n            }\n        }\n        // è¿ç§»æŠ½å¡æ•°æ®\n        const gachaStr = localStorage.getItem('shinycolors_gacha_data');\n        if (gachaStr) {\n            try {\n                const gacha = JSON.parse(gachaStr);\n                await setData(STORES.GACHA, 'main', gacha);\n                console.log('ðŸŽ´ è¿ç§»æŠ½å¡æ•°æ®æˆåŠŸ');\n            }\n            catch (e) {\n                console.warn('âš ï¸ æŠ½å¡æ•°æ®è§£æžå¤±è´¥:', e);\n            }\n        }\n        // è¿ç§»è®¾ç½®æ•°æ®\n        const settingsStr = localStorage.getItem('shinycolors_settings');\n        if (settingsStr) {\n            try {\n                const settings = JSON.parse(settingsStr);\n                await setData(STORES.SETTINGS, 'main', settings);\n                console.log('âš™ï¸ è¿ç§»è®¾ç½®æ•°æ®æˆåŠŸ');\n            }\n            catch (e) {\n                console.warn('âš ï¸ è®¾ç½®æ•°æ®è§£æžå¤±è´¥:', e);\n            }\n        }\n        // è¿ç§»å¥½æ„Ÿåº¦æ•°æ®\n        const affectionStr = localStorage.getItem('shinycolors_affection');\n        if (affectionStr) {\n            try {\n                const affection = JSON.parse(affectionStr);\n                await setData(STORES.AFFECTION, 'main', affection);\n                console.log('ðŸ’– è¿ç§»å¥½æ„Ÿåº¦æ•°æ®æˆåŠŸ');\n            }\n            catch (e) {\n                console.warn('âš ï¸ å¥½æ„Ÿåº¦æ•°æ®è§£æžå¤±è´¥:', e);\n            }\n        }\n        // è¿ç§»åˆ¶ä½œäººåç§°\n        const producerName = localStorage.getItem('shinycolors_producer_name');\n        if (producerName) {\n            await setData(STORES.RESOURCES, 'producer_name', producerName);\n            console.log('ðŸ‘¤ è¿ç§»åˆ¶ä½œäººåç§°æˆåŠŸ');\n        }\n        // æ ‡è®°å·²è¿ç§»\n        await setData(STORES.METADATA, 'migrated_from_localstorage', true);\n        await setData(STORES.METADATA, 'migration_date', new Date().toISOString());\n        console.log('âœ… æ•°æ®è¿ç§»å®Œæˆï¼');\n        console.log('ðŸ’¡ æç¤ºï¼šå¯ä»¥æ‰‹åŠ¨æ¸…ç†localStorageä»¥é‡Šæ”¾ç©ºé—´');\n    }\n    catch (error) {\n        console.error('âŒ æ•°æ®è¿ç§»å¤±è´¥:', error);\n        throw error;\n    }\n}\n// ============================================================================\n// èµ„æºæ•°æ® API\n// ============================================================================\nasync function getResources() {\n    const data = await getData(STORES.RESOURCES, 'main');\n    return data || {\n        featherStones: 3000,\n        fans: 0,\n        producerLevel: 1,\n        producerExp: 0,\n    };\n}\nasync function saveResources(resources) {\n    await setData(STORES.RESOURCES, 'main', resources);\n}\nasync function getProducerName() {\n    const name = await getData(STORES.RESOURCES, 'producer_name');\n    return name || 'åˆ¶ä½œäºº';\n}\nasync function saveProducerName(name) {\n    await setData(STORES.RESOURCES, 'producer_name', name);\n}\n// ============================================================================\n// æŠ½å¡æ•°æ® API\n// ============================================================================\nasync function getGachaData() {\n    const data = await getData(STORES.GACHA, 'main');\n    return data || {\n        stardust: 0,\n        ownedCards: {},\n        pity: {\n            totalPulls: 0,\n            ssrPity: 0,\n            urPity: 0,\n        },\n        history: [],\n    };\n}\nasync function saveGachaData(gacha) {\n    await setData(STORES.GACHA, 'main', gacha);\n}\n// ============================================================================\n// è®¾ç½®æ•°æ® API\n// ============================================================================\nasync function getSettings() {\n    const data = await getData(STORES.SETTINGS, 'main');\n    return data || {\n        fullscreenMode: 'button',\n        devMode: {\n            infiniteGems: false,\n            unlockAllCharacters: false,\n            maxLevel: false,\n        },\n        musicVolume: 0.7,\n        autoPlay: false,\n        playMode: 'sequential',\n    };\n}\nasync function saveSettings(settings) {\n    await setData(STORES.SETTINGS, 'main', settings);\n}\n// ============================================================================\n// å¥½æ„Ÿåº¦æ•°æ® API\n// ============================================================================\nasync function getAffection() {\n    const data = await getData(STORES.AFFECTION, 'main');\n    return data || {};\n}\nasync function saveAffection(affection) {\n    await setData(STORES.AFFECTION, 'main', affection);\n}\n// ============================================================================\n// ç®¡ç†åŠŸèƒ½\n// ============================================================================\n/**\n * æ¸…é™¤æ‰€æœ‰æ¸¸æˆæ•°æ®ï¼ˆä¿ç•™è¿ç§»æ ‡è®°ï¼‰\n */\nasync function clearAllGameData() {\n    console.log('ðŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æ¸¸æˆæ•°æ®...');\n    await clearStore(STORES.RESOURCES);\n    await clearStore(STORES.GACHA);\n    await clearStore(STORES.SETTINGS);\n    await clearStore(STORES.AFFECTION);\n    console.log('âœ… æ¸¸æˆæ•°æ®å·²æ¸…é™¤');\n}\n/**\n * æ¸…é™¤æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬è¿ç§»æ ‡è®°ï¼‰\n */\nasync function clearAllData() {\n    console.log('ðŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å…ƒæ•°æ®ï¼‰...');\n    await clearAllGameData();\n    await clearStore(STORES.METADATA);\n    console.log('âœ… æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');\n}\n/**\n * å¯¼å‡ºæ‰€æœ‰æ•°æ®ï¼ˆç”¨äºŽå¤‡ä»½ï¼‰\n */\nasync function exportAllData() {\n    const data = {\n        resources: await getResources(),\n        producerName: await getProducerName(),\n        gacha: await getGachaData(),\n        settings: await getSettings(),\n        affection: await getAffection(),\n        exportDate: new Date().toISOString(),\n    };\n    return JSON.stringify(data, null, 2);\n}\n/**\n * å¯¼å…¥æ•°æ®ï¼ˆä»Žå¤‡ä»½æ¢å¤ï¼‰\n */\nasync function importAllData(jsonStr) {\n    try {\n        const data = JSON.parse(jsonStr);\n        if (data.resources)\n            await saveResources(data.resources);\n        if (data.producerName)\n            await saveProducerName(data.producerName);\n        if (data.gacha)\n            await saveGachaData(data.gacha);\n        if (data.settings)\n            await saveSettings(data.settings);\n        if (data.affection)\n            await saveAffection(data.affection);\n        console.log('âœ… æ•°æ®å¯¼å…¥æˆåŠŸ');\n    }\n    catch (error) {\n        console.error('âŒ æ•°æ®å¯¼å…¥å¤±è´¥:', error);\n        throw new Error('æ•°æ®æ ¼å¼ä¸æ­£ç¡®');\n    }\n}\n// ============================================================================\n// åˆå§‹åŒ–\n// ============================================================================\n/**\n * åˆå§‹åŒ–æ¸¸æˆæ•°æ®ç³»ç»Ÿ\n */\nasync function initGameData() {\n    console.log('ðŸŽ® åˆå§‹åŒ–æ¸¸æˆæ•°æ®ç³»ç»Ÿ...');\n    // æ‰“å¼€æ•°æ®åº“\n    await openDatabase();\n    // è‡ªåŠ¨è¿ç§»localStorageæ•°æ®\n    await migrateFromLocalStorage();\n    console.log('âœ… æ¸¸æˆæ•°æ®ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5YG25YOP5aSn5biI6Zeq6ICA6Imy5b2pL3V0aWxzL2dhbWUtZGF0YS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7O0dBUUc7QUE2Q0gsK0VBQStFO0FBQy9FLGVBQWU7QUFDZiwrRUFBK0U7QUFFL0UsTUFBTSxPQUFPLEdBQUcsdUJBQXVCLENBQUM7QUFDeEMsTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBRXJCLE1BQU0sTUFBTSxHQUFHO0lBQ2IsU0FBUyxFQUFFLFdBQVc7SUFDdEIsS0FBSyxFQUFFLE9BQU87SUFDZCxRQUFRLEVBQUUsVUFBVTtJQUNwQixTQUFTLEVBQUUsV0FBVztJQUN0QixRQUFRLEVBQUUsVUFBVSxFQUFHLGFBQWE7Q0FDNUIsQ0FBQztBQUVYLCtFQUErRTtBQUMvRSxnQkFBZ0I7QUFDaEIsK0VBQStFO0FBRS9FLElBQUksVUFBVSxHQUF1QixJQUFJLENBQUM7QUFFMUM7O0dBRUc7QUFDSCxLQUFLLFVBQVUsWUFBWTtJQUN6QixJQUFJLFVBQVUsRUFBRSxDQUFDO1FBQ2YsT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQztJQUVELE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7UUFDckMsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFFcEQsT0FBTyxDQUFDLE9BQU8sR0FBRyxHQUFHLEVBQUU7WUFDckIsT0FBTyxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDakQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4QixDQUFDLENBQUM7UUFFRixPQUFPLENBQUMsU0FBUyxHQUFHLEdBQUcsRUFBRTtZQUN2QixVQUFVLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLGlC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RTtBQUUvRTs7R0FFRztBQUNJLEtBQUssVUFBVSxZQUFZO0lBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUUvQixRQUFRO0lBQ1IsTUFBTSxZQUFZLEVBQUUsQ0FBQztJQUVyQixxQkFBcUI7SUFDckIsTUFBTSx1QkFBdUIsRUFBRSxDQUFDO0lBRWhDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDL0IsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMv5YG25YOP5aSn5biI6Zeq6ICA6Imy5b2pL3V0aWxzL2dhbWUtZGF0YS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEluZGV4ZWREQiDmuLjmiI/mlbDmja7nrqHnkIbns7vnu59cbiAqIFxuICog5Yqf6IO977yaXG4gKiAtIOe7n+S4gOeuoeeQhuaJgOaciea4uOaIj+aVsOaNru+8iOi1hOa6kOOAgeaKveWNoeOAgeiuvue9ruetie+8iVxuICogLSDmlK/mjIHku45sb2NhbFN0b3JhZ2Xoh6rliqjov4Hnp7tcbiAqIC0g5o+Q5L6b57G75Z6L5a6J5YWo55qEQVBJXG4gKiAtIOmrmOaAp+iDveW8guatpeaTjeS9nFxuICovXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIOexu+Wei+WumuS5iVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEdhbWVSZXNvdXJjZXMge1xuICBmZWF0aGVyU3RvbmVzOiBudW1iZXI7ICAvLyDnvr3nn7NcbiAgZmFuczogbnVtYmVyOyAgICAgICAgICAgLy8g57KJ5LidXG4gIHByb2R1Y2VyTGV2ZWw6IG51bWJlcjsgIC8vIOWItuS9nOS6uuetiee6p1xuICBwcm9kdWNlckV4cDogbnVtYmVyOyAgICAvLyDnu4/pqozlgLxcbiAgcHJvZHVjZXJOYW1lPzogc3RyaW5nOyAgLy8g5Yi25L2c5Lq65ZCN56ewXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2FjaGFEYXRhIHtcbiAgc3RhcmR1c3Q6IG51bWJlcjsgICAgICAgLy8g5pif5bCYXG4gIG93bmVkQ2FyZHM6IFJlY29yZDxzdHJpbmcsIGFueT47ICAvLyDmi6XmnInnmoTljaHniYwge2NhcmRJZDogY2FyZERhdGF9XG4gIHBpdHk6IHtcbiAgICB0b3RhbFB1bGxzOiBudW1iZXI7XG4gICAgc3NyUGl0eTogbnVtYmVyO1xuICAgIHVyUGl0eTogbnVtYmVyO1xuICB9O1xuICBoaXN0b3J5OiBBcnJheTx7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG4gICAgY2FyZHM6IHN0cmluZ1tdO1xuICAgIHR5cGU6ICdzaW5nbGUnIHwgJ3Rlbic7XG4gIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdhbWVTZXR0aW5ncyB7XG4gIGZ1bGxzY3JlZW5Nb2RlOiAnYnV0dG9uJyB8ICdkb3VibGVjbGljaycgfCAnYm90aCc7XG4gIGRldk1vZGU6IHtcbiAgICBpbmZpbml0ZUdlbXM6IGJvb2xlYW47XG4gICAgdW5sb2NrQWxsQ2hhcmFjdGVyczogYm9vbGVhbjtcbiAgICBtYXhMZXZlbDogYm9vbGVhbjtcbiAgfTtcbiAgbXVzaWNWb2x1bWU6IG51bWJlcjtcbiAgYXV0b1BsYXk6IGJvb2xlYW47XG4gIHBsYXlNb2RlOiAnc2VxdWVudGlhbCcgfCAncmFuZG9tJyB8ICdzaW5nbGUnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFmZmVjdGlvbkRhdGEge1xuICBbaWRvbElkOiBzdHJpbmddOiBudW1iZXI7ICAvLyDlgbblg49JRCAtPiDlpb3mhJ/luqblgLxcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSW5kZXhlZERCIOmFjee9rlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBEQl9OQU1FID0gJ3NoaW55Y29sb3JzX2dhbWVfZGF0YSc7XG5jb25zdCBEQl9WRVJTSU9OID0gMTtcblxuY29uc3QgU1RPUkVTID0ge1xuICBSRVNPVVJDRVM6ICdyZXNvdXJjZXMnLFxuICBHQUNIQTogJ2dhY2hhJyxcbiAgU0VUVElOR1M6ICdzZXR0aW5ncycsXG4gIEFGRkVDVElPTjogJ2FmZmVjdGlvbicsXG4gIE1FVEFEQVRBOiAnbWV0YWRhdGEnLCAgLy8g5a2Y5YKo6L+B56e754q25oCB562J5YWD5pWw5o2uXG59IGFzIGNvbnN0O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBJbmRleGVkREIg5Yid5aeL5YyWXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmxldCBkYkluc3RhbmNlOiBJREJEYXRhYmFzZSB8IG51bGwgPSBudWxsO1xuXG4vKipcbiAqIOaJk+W8gOaVsOaNruW6k1xuICovXG5hc3luYyBmdW5jdGlvbiBvcGVuRGF0YWJhc2UoKTogUHJvbWlzZTxJREJEYXRhYmFzZT4ge1xuICBpZiAoZGJJbnN0YW5jZSkge1xuICAgIHJldHVybiBkYkluc3RhbmNlO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oREJfTkFNRSwgREJfVkVSU0lPTik7XG5cbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgSW5kZXhlZERC5omT5byA5aSx6LSlOicsIHJlcXVlc3QuZXJyb3IpO1xuICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgIGRiSW5zdGFuY2UgPSByZXF1ZXN0LnJlc3VsdDtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgSW5kZXhlZERC5omT5byA5oiQ5YqfJyk7XG4gICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICB9O1xuXG4gICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBkYiA9IChldmVudC50YXJnZXQgYXMgSURCT3BlbkRCUmVxdWVzdCkucmVzdWx0O1xuXG4gICAgICAvLyDliJvlu7rmiYDmnInlr7nosaHlrZjlgqhcbiAgICAgIE9iamVjdC52YWx1ZXMoU1RPUkVTKS5mb3JFYWNoKHN0b3JlTmFtZSA9PiB7XG4gICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhzdG9yZU5hbWUpKSB7XG4gICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+TpiDliJvlu7rlr7nosaHlrZjlgqg6ICR7c3RvcmVOYW1lfWApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g6YCa55So6K+75YaZ5pON5L2cXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICog5LuOSW5kZXhlZERC6K+75Y+W5pWw5o2uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldERhdGE8VD4oc3RvcmVOYW1lOiBzdHJpbmcsIGtleTogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRhdGFiYXNlKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZG9ubHknKTtcbiAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5nZXQoa2V5KTtcblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKHJlcXVlc3QucmVzdWx0IHx8IG51bGwpO1xuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCDor7vlj5bmlbDmja7lpLHotKUgWyR7c3RvcmVOYW1lfS8ke2tleX1dOmAsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIOWQkUluZGV4ZWREQuWGmeWFpeaVsOaNrlxuICovXG5hc3luYyBmdW5jdGlvbiBzZXREYXRhPFQ+KHN0b3JlTmFtZTogc3RyaW5nLCBrZXk6IHN0cmluZywgdmFsdWU6IFQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EYXRhYmFzZSgpO1xuICAgIFxuICAgIC8vIOa3seaLt+i0neWOu+mZpFByb3h577yI5L2/55SoSlNPTuW6j+WIl+WMli/lj43luo/liJfljJbvvIlcbiAgICBjb25zdCBjbGVhblZhbHVlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIFxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpO1xuICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgY29uc3QgcmVxdWVzdCA9IHN0b3JlLnB1dChjbGVhblZhbHVlLCBrZXkpO1xuXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKTtcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwg5YaZ5YWl5pWw5o2u5aSx6LSlIFske3N0b3JlTmFtZX0vJHtrZXl9XTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiDliKDpmaTmlbDmja5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVsZXRlRGF0YShzdG9yZU5hbWU6IHN0cmluZywga2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EYXRhYmFzZSgpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpO1xuICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgY29uc3QgcmVxdWVzdCA9IHN0b3JlLmRlbGV0ZShrZXkpO1xuXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKTtcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGDinYwg5Yig6Zmk5pWw5o2u5aSx6LSlIFske3N0b3JlTmFtZX0vJHtrZXl9XTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiDmuIXnqbrmlbTkuKrlrZjlgqhcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2xlYXJTdG9yZShzdG9yZU5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRhdGFiYXNlKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZHdyaXRlJyk7XG4gICAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUuY2xlYXIoKTtcblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5eR77iPIOW3sua4heepuuWtmOWCqDogJHtzdG9yZU5hbWV9YCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihg4p2MIOa4heepuuWtmOWCqOWksei0pSBbJHtzdG9yZU5hbWV9XTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gbG9jYWxTdG9yYWdlIOi/geenu1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIOS7jmxvY2FsU3RvcmFnZei/geenu+aVsOaNruWIsEluZGV4ZWREQlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlncmF0ZUZyb21Mb2NhbFN0b3JhZ2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnNvbGUubG9nKCfwn5SEIOW8gOWni+S7jmxvY2FsU3RvcmFnZei/geenu+aVsOaNri4uLicpO1xuXG4gIHRyeSB7XG4gICAgLy8g5qOA5p+l5piv5ZCm5bey57uP6L+B56e76L+HXG4gICAgY29uc3QgbWlncmF0ZWQgPSBhd2FpdCBnZXREYXRhPGJvb2xlYW4+KFNUT1JFUy5NRVRBREFUQSwgJ21pZ3JhdGVkX2Zyb21fbG9jYWxzdG9yYWdlJyk7XG4gICAgaWYgKG1pZ3JhdGVkKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIOaVsOaNruW3sue7j+i/geenu+i/h++8jOi3s+i/hycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOi/geenu+i1hOa6kOaVsOaNrlxuICAgIGNvbnN0IHJlc291cmNlc1N0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzaGlueWNvbG9yc19yZXNvdXJjZXMnKTtcbiAgICBpZiAocmVzb3VyY2VzU3RyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNvdXJjZXMgPSBKU09OLnBhcnNlKHJlc291cmNlc1N0cik7XG4gICAgICAgIGF3YWl0IHNldERhdGEoU1RPUkVTLlJFU09VUkNFUywgJ21haW4nLCByZXNvdXJjZXMpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TpiDov4Hnp7votYTmupDmlbDmja7miJDlip8nKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g6LWE5rqQ5pWw5o2u6Kej5p6Q5aSx6LSlOicsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOi/geenu+aKveWNoeaVsOaNrlxuICAgIGNvbnN0IGdhY2hhU3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NoaW55Y29sb3JzX2dhY2hhX2RhdGEnKTtcbiAgICBpZiAoZ2FjaGFTdHIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGdhY2hhID0gSlNPTi5wYXJzZShnYWNoYVN0cik7XG4gICAgICAgIGF3YWl0IHNldERhdGEoU1RPUkVTLkdBQ0hBLCAnbWFpbicsIGdhY2hhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjrQg6L+B56e75oq95Y2h5pWw5o2u5oiQ5YqfJyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIOaKveWNoeaVsOaNruino+aekOWksei0pTonLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDov4Hnp7vorr7nva7mlbDmja5cbiAgICBjb25zdCBzZXR0aW5nc1N0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzaGlueWNvbG9yc19zZXR0aW5ncycpO1xuICAgIGlmIChzZXR0aW5nc1N0cikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBKU09OLnBhcnNlKHNldHRpbmdzU3RyKTtcbiAgICAgICAgYXdhaXQgc2V0RGF0YShTVE9SRVMuU0VUVElOR1MsICdtYWluJywgc2V0dGluZ3MpO1xuICAgICAgICBjb25zb2xlLmxvZygn4pqZ77iPIOi/geenu+iuvue9ruaVsOaNruaIkOWKnycpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDorr7nva7mlbDmja7op6PmnpDlpLHotKU6JywgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g6L+B56e75aW95oSf5bqm5pWw5o2uXG4gICAgY29uc3QgYWZmZWN0aW9uU3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NoaW55Y29sb3JzX2FmZmVjdGlvbicpO1xuICAgIGlmIChhZmZlY3Rpb25TdHIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFmZmVjdGlvbiA9IEpTT04ucGFyc2UoYWZmZWN0aW9uU3RyKTtcbiAgICAgICAgYXdhaXQgc2V0RGF0YShTVE9SRVMuQUZGRUNUSU9OLCAnbWFpbicsIGFmZmVjdGlvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KWIOi/geenu+WlveaEn+W6puaVsOaNruaIkOWKnycpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDlpb3mhJ/luqbmlbDmja7op6PmnpDlpLHotKU6JywgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g6L+B56e75Yi25L2c5Lq65ZCN56ewXG4gICAgY29uc3QgcHJvZHVjZXJOYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NoaW55Y29sb3JzX3Byb2R1Y2VyX25hbWUnKTtcbiAgICBpZiAocHJvZHVjZXJOYW1lKSB7XG4gICAgICBhd2FpdCBzZXREYXRhKFNUT1JFUy5SRVNPVVJDRVMsICdwcm9kdWNlcl9uYW1lJywgcHJvZHVjZXJOYW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5GkIOi/geenu+WItuS9nOS6uuWQjeensOaIkOWKnycpO1xuICAgIH1cblxuICAgIC8vIOagh+iusOW3sui/geenu1xuICAgIGF3YWl0IHNldERhdGEoU1RPUkVTLk1FVEFEQVRBLCAnbWlncmF0ZWRfZnJvbV9sb2NhbHN0b3JhZ2UnLCB0cnVlKTtcbiAgICBhd2FpdCBzZXREYXRhKFNUT1JFUy5NRVRBREFUQSwgJ21pZ3JhdGlvbl9kYXRlJywgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcblxuICAgIGNvbnNvbGUubG9nKCfinIUg5pWw5o2u6L+B56e75a6M5oiQ77yBJyk7XG4gICAgY29uc29sZS5sb2coJ/CfkqEg5o+Q56S677ya5Y+v5Lul5omL5Yqo5riF55CGbG9jYWxTdG9yYWdl5Lul6YeK5pS+56m66Ze0Jyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIOaVsOaNrui/geenu+Wksei0pTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g6LWE5rqQ5pWw5o2uIEFQSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVzb3VyY2VzKCk6IFByb21pc2U8R2FtZVJlc291cmNlcz4ge1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RGF0YTxHYW1lUmVzb3VyY2VzPihTVE9SRVMuUkVTT1VSQ0VTLCAnbWFpbicpO1xuICByZXR1cm4gZGF0YSB8fCB7XG4gICAgZmVhdGhlclN0b25lczogMzAwMCxcbiAgICBmYW5zOiAwLFxuICAgIHByb2R1Y2VyTGV2ZWw6IDEsXG4gICAgcHJvZHVjZXJFeHA6IDAsXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlUmVzb3VyY2VzKHJlc291cmNlczogR2FtZVJlc291cmNlcyk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBzZXREYXRhKFNUT1JFUy5SRVNPVVJDRVMsICdtYWluJywgcmVzb3VyY2VzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y2VyTmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBuYW1lID0gYXdhaXQgZ2V0RGF0YTxzdHJpbmc+KFNUT1JFUy5SRVNPVVJDRVMsICdwcm9kdWNlcl9uYW1lJyk7XG4gIHJldHVybiBuYW1lIHx8ICfliLbkvZzkuronO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVByb2R1Y2VyTmFtZShuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgc2V0RGF0YShTVE9SRVMuUkVTT1VSQ0VTLCAncHJvZHVjZXJfbmFtZScsIG5hbWUpO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDmir3ljaHmlbDmja4gQVBJXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHYWNoYURhdGEoKTogUHJvbWlzZTxHYWNoYURhdGE+IHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERhdGE8R2FjaGFEYXRhPihTVE9SRVMuR0FDSEEsICdtYWluJyk7XG4gIHJldHVybiBkYXRhIHx8IHtcbiAgICBzdGFyZHVzdDogMCxcbiAgICBvd25lZENhcmRzOiB7fSxcbiAgICBwaXR5OiB7XG4gICAgICB0b3RhbFB1bGxzOiAwLFxuICAgICAgc3NyUGl0eTogMCxcbiAgICAgIHVyUGl0eTogMCxcbiAgICB9LFxuICAgIGhpc3Rvcnk6IFtdLFxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUdhY2hhRGF0YShnYWNoYTogR2FjaGFEYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHNldERhdGEoU1RPUkVTLkdBQ0hBLCAnbWFpbicsIGdhY2hhKTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g6K6+572u5pWw5o2uIEFQSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2V0dGluZ3MoKTogUHJvbWlzZTxHYW1lU2V0dGluZ3M+IHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGdldERhdGE8R2FtZVNldHRpbmdzPihTVE9SRVMuU0VUVElOR1MsICdtYWluJyk7XG4gIHJldHVybiBkYXRhIHx8IHtcbiAgICBmdWxsc2NyZWVuTW9kZTogJ2J1dHRvbicsXG4gICAgZGV2TW9kZToge1xuICAgICAgaW5maW5pdGVHZW1zOiBmYWxzZSxcbiAgICAgIHVubG9ja0FsbENoYXJhY3RlcnM6IGZhbHNlLFxuICAgICAgbWF4TGV2ZWw6IGZhbHNlLFxuICAgIH0sXG4gICAgbXVzaWNWb2x1bWU6IDAuNyxcbiAgICBhdXRvUGxheTogZmFsc2UsXG4gICAgcGxheU1vZGU6ICdzZXF1ZW50aWFsJyxcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTZXR0aW5ncyhzZXR0aW5nczogR2FtZVNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHNldERhdGEoU1RPUkVTLlNFVFRJTkdTLCAnbWFpbicsIHNldHRpbmdzKTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g5aW95oSf5bqm5pWw5o2uIEFQSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWZmZWN0aW9uKCk6IFByb21pc2U8QWZmZWN0aW9uRGF0YT4ge1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RGF0YTxBZmZlY3Rpb25EYXRhPihTVE9SRVMuQUZGRUNUSU9OLCAnbWFpbicpO1xuICByZXR1cm4gZGF0YSB8fCB7fTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVBZmZlY3Rpb24oYWZmZWN0aW9uOiBBZmZlY3Rpb25EYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHNldERhdGEoU1RPUkVTLkFGRkVDVElPTiwgJ21haW4nLCBhZmZlY3Rpb24pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDnrqHnkIblip/og71cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiDmuIXpmaTmiYDmnInmuLjmiI/mlbDmja7vvIjkv53nlZnov4Hnp7vmoIforrDvvIlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyQWxsR2FtZURhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnNvbGUubG9nKCfwn5eR77iPIOa4hemZpOaJgOaciea4uOaIj+aVsOaNri4uLicpO1xuICBcbiAgYXdhaXQgY2xlYXJTdG9yZShTVE9SRVMuUkVTT1VSQ0VTKTtcbiAgYXdhaXQgY2xlYXJTdG9yZShTVE9SRVMuR0FDSEEpO1xuICBhd2FpdCBjbGVhclN0b3JlKFNUT1JFUy5TRVRUSU5HUyk7XG4gIGF3YWl0IGNsZWFyU3RvcmUoU1RPUkVTLkFGRkVDVElPTik7XG4gIFxuICBjb25zb2xlLmxvZygn4pyFIOa4uOaIj+aVsOaNruW3sua4hemZpCcpO1xufVxuXG4vKipcbiAqIOa4hemZpOaJgOacieaVsOaNru+8iOWMheaLrOi/geenu+agh+iusO+8iVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJBbGxEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zb2xlLmxvZygn8J+Xke+4jyDmuIXpmaTmiYDmnInmlbDmja7vvIjljIXmi6zlhYPmlbDmja7vvIkuLi4nKTtcbiAgXG4gIGF3YWl0IGNsZWFyQWxsR2FtZURhdGEoKTtcbiAgYXdhaXQgY2xlYXJTdG9yZShTVE9SRVMuTUVUQURBVEEpO1xuICBcbiAgY29uc29sZS5sb2coJ+KchSDmiYDmnInmlbDmja7lt7LmuIXpmaQnKTtcbn1cblxuLyoqXG4gKiDlr7zlh7rmiYDmnInmlbDmja7vvIjnlKjkuo7lpIfku73vvIlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4cG9ydEFsbERhdGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICByZXNvdXJjZXM6IGF3YWl0IGdldFJlc291cmNlcygpLFxuICAgIHByb2R1Y2VyTmFtZTogYXdhaXQgZ2V0UHJvZHVjZXJOYW1lKCksXG4gICAgZ2FjaGE6IGF3YWl0IGdldEdhY2hhRGF0YSgpLFxuICAgIHNldHRpbmdzOiBhd2FpdCBnZXRTZXR0aW5ncygpLFxuICAgIGFmZmVjdGlvbjogYXdhaXQgZ2V0QWZmZWN0aW9uKCksXG4gICAgZXhwb3J0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xuICBcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xufVxuXG4vKipcbiAqIOWvvOWFpeaVsOaNru+8iOS7juWkh+S7veaBouWkje+8iVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0QWxsRGF0YShqc29uU3RyOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShqc29uU3RyKTtcbiAgICBcbiAgICBpZiAoZGF0YS5yZXNvdXJjZXMpIGF3YWl0IHNhdmVSZXNvdXJjZXMoZGF0YS5yZXNvdXJjZXMpO1xuICAgIGlmIChkYXRhLnByb2R1Y2VyTmFtZSkgYXdhaXQgc2F2ZVByb2R1Y2VyTmFtZShkYXRhLnByb2R1Y2VyTmFtZSk7XG4gICAgaWYgKGRhdGEuZ2FjaGEpIGF3YWl0IHNhdmVHYWNoYURhdGEoZGF0YS5nYWNoYSk7XG4gICAgaWYgKGRhdGEuc2V0dGluZ3MpIGF3YWl0IHNhdmVTZXR0aW5ncyhkYXRhLnNldHRpbmdzKTtcbiAgICBpZiAoZGF0YS5hZmZlY3Rpb24pIGF3YWl0IHNhdmVBZmZlY3Rpb24oZGF0YS5hZmZlY3Rpb24pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUg5pWw5o2u5a+85YWl5oiQ5YqfJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIOaVsOaNruWvvOWFpeWksei0pTonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfmlbDmja7moLzlvI/kuI3mraPnoa4nKTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDliJ3lp4vljJZcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiDliJ3lp4vljJbmuLjmiI/mlbDmja7ns7vnu59cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRHYW1lRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc29sZS5sb2coJ/Cfjq4g5Yid5aeL5YyW5ri45oiP5pWw5o2u57O757ufLi4uJyk7XG4gIFxuICAvLyDmiZPlvIDmlbDmja7lupNcbiAgYXdhaXQgb3BlbkRhdGFiYXNlKCk7XG4gIFxuICAvLyDoh6rliqjov4Hnp7tsb2NhbFN0b3JhZ2XmlbDmja5cbiAgYXdhaXQgbWlncmF0ZUZyb21Mb2NhbFN0b3JhZ2UoKTtcbiAgXG4gIGNvbnNvbGUubG9nKCfinIUg5ri45oiP5pWw5o2u57O757uf5Yid5aeL5YyW5a6M5oiQJyk7XG59XG5cblxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/å¶åƒå¤§å¸ˆé—ªè€€è‰²å½©/utils/game-data.ts\n\n}");
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./src/common/index.ts");

const __webpack_exports__initializeAllListeners = __webpack_exports__.initializeAllListeners;

const __webpack_exports__messageInterceptor = __webpack_exports__.messageInterceptor;

export { __webpack_exports__initializeAllListeners as initializeAllListeners, __webpack_exports__messageInterceptor as messageInterceptor };